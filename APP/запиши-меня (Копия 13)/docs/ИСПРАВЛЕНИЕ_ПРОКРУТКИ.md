# Исправление прокрутки в модальных окнах

## Проблема

При открытии модального окна "Клиенты":
- ❌ Не видно всех клиентов в списке
- ❌ При открытии карточки клиента не видно всех записей
- ❌ Контент появляется только после манипуляций пальцем по экрану

## Причина

Проблема была в CSS стилях для `.bottom-sheet-scrollable-content`:
- Не было `min-height: 0` для правильной работы flexbox
- Не было `max-height: 100%` для ограничения высоты
- Не было `overscroll-behavior: contain` для предотвращения проблем с прокруткой

## Решение

### 1. Обновлены стили для `.bottom-sheet-scrollable-content`

```css
.bottom-sheet-scrollable-content {
    overflow-y: auto;
    overflow-x: hidden;
    flex: 1;
    -webkit-overflow-scrolling: touch;
    /* Принудительная прокрутка */
    min-height: 0;           /* ← Добавлено */
    max-height: 100%;        /* ← Добавлено */
    overscroll-behavior: contain;  /* ← Добавлено */
}
```

### 2. Обновлены стили для списков

```css
/* List in scrollable content */
.bottom-sheet-scrollable-content .tg-list {
    margin: 0;
    /* Убираем ограничение высоты, чтобы список мог расти */
    min-height: min-content;  /* ← Добавлено */
}

/* Принудительная прокрутка для списков */
.bottom-sheet-scrollable-content > .tg-list {
    overflow-y: visible;      /* ← Добавлено */
}
```

## Как это работает

### Flexbox и прокрутка

```
┌─────────────────────────────┐
│  .bottom-sheet-content      │  ← display: flex, flex-direction: column
│  ┌───────────────────────┐  │
│  │ .bottom-sheet-header  │  │  ← flex-shrink: 0 (фиксированный)
│  └───────────────────────┘  │
│  ┌───────────────────────┐  │
│  │ .fixed-content        │  │  ← flex-shrink: 0 (фиксированный)
│  └───────────────────────┘  │
│  ┌───────────────────────┐  │
│  │ .scrollable-content   │  │  ← flex: 1, min-height: 0
│  │ ┌─────────────────┐   │  │
│  │ │ Список клиентов │   │  │  ← overflow-y: auto
│  │ │ ...             │   │  │
│  │ │ ...             │   │  │  ← Прокручивается!
│  │ └─────────────────┘   │  │
│  └───────────────────────┘  │
│  ┌───────────────────────┐  │
│  │ .footer-content       │  │  ← flex-shrink: 0 (фиксированный)
│  └───────────────────────┘  │
└─────────────────────────────┘
```

### Ключевые моменты

1. **`min-height: 0`** - позволяет flex-элементу сжиматься меньше своего контента
2. **`max-height: 100%`** - ограничивает высоту контейнера
3. **`overscroll-behavior: contain`** - предотвращает прокрутку родительского элемента
4. **`-webkit-overflow-scrolling: touch`** - плавная прокрутка на iOS

## Результат

### ✅ Список клиентов
```
┌─────────────────────────────┐
│  Мои клиенты           [↓]  │
│  ─────────────────────────  │
│  [Поиск...]                 │
│  ─────────────────────────  │
│  Макс                       │  ← Видно
│  Максим                     │  ← Видно
│  Настя                      │  ← Видно
│  Петька                     │  ← Видно
│  Юля                        │  ← Видно
│  Bullit                     │  ← Видно
│  Morent                     │  ← Видно
│  ↓ Прокрутка работает ↓     │
└─────────────────────────────┘
```

### ✅ Карточка клиента
```
┌─────────────────────────────┐
│  Юля                        │
│  Телефон не указан          │
│  ─────────────────────────  │
│  Заметки о клиенте:         │
│  [текстовое поле]           │
│  ─────────────────────────  │
│  История записей            │
│  ─────────────────────────  │
│  Запись 1                   │  ← Видно
│  Запись 2                   │  ← Видно
│  Запись 3                   │  ← Видно
│  ↓ Прокрутка работает ↓     │
└─────────────────────────────┘
```

## Тестирование

### Проверьте список клиентов

1. Откройте раздел "Клиенты"
2. Должны быть видны все клиенты
3. Прокрутка должна работать плавно
4. Не нужно "манипулировать пальцем"

### Проверьте карточку клиента

1. Откройте любого клиента
2. Должны быть видны все записи
3. Прокрутка должна работать плавно
4. Заметки и записи должны быть доступны

### Проверьте другие модальные окна

1. Услуги - должна работать прокрутка
2. Расписание - должна работать прокрутка
3. Задачи - должна работать прокрутка
4. Расходы - должна работать прокрутка

## Технические детали

### CSS Flexbox

Когда flex-контейнер имеет `flex-direction: column`, дочерние элементы с `flex: 1` будут занимать все доступное пространство. Но если контент больше, чем доступное пространство, нужно добавить `min-height: 0`, чтобы элемент мог сжаться и показать прокрутку.

### Overscroll Behavior

`overscroll-behavior: contain` предотвращает "резиновую" прокрутку (rubber banding) и прокрутку родительского элемента, когда достигнут конец списка.

### iOS Smooth Scrolling

`-webkit-overflow-scrolling: touch` включает аппаратное ускорение прокрутки на iOS, делая её более плавной.

## Сборка

```
✓ 83 modules transformed
dist/assets/index-qrrOJdFa.css   16.19 kB │ gzip:  3.59 kB
✓ built in 3.01s
```

**Изменения:**
- +0.15 KB CSS (было 16.04 KB, стало 16.19 KB)
- +0.03 KB gzip (было 3.56 KB, стало 3.59 KB)

## Итог

✅ Прокрутка в модальных окнах работает правильно  
✅ Все клиенты видны сразу  
✅ Все записи клиента видны сразу  
✅ Не нужно "манипулировать пальцем"  
✅ Плавная прокрутка на всех устройствах  

---

**Дата:** 21 октября 2025  
**Действие:** Исправление прокрутки в модальных окнах
