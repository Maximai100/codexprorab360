# Добавление поля для фотографии профиля мастера

## Что изменилось

Теперь компонент Avatar поддерживает отображение фотографии профиля мастера. Если фотография доступна, она будет показана вместо инициалов. Если фото не загружается или отсутствует, автоматически отображаются цветные инициалы.

## Инструкция по настройке в Directus

### Шаг 1: Добавьте поле `photoUrl` в коллекцию `masters`

1. Откройте панель администратора Directus
2. Перейдите в **Settings** → **Data Model**
3. Выберите коллекцию **masters**
4. Нажмите **Create Field**
5. Настройте поле:
   - **Field Name**: `photoUrl`
   - **Type**: **String** (Input)
   - **Interface**: **Input**
   - **Options**:
     - Placeholder: `https://example.com/photo.jpg`
     - Icon: `insert_photo`
   - **Required**: Снимите галочку (поле необязательное)
6. Нажмите **Save**

### Шаг 2: Добавьте фотографию для мастера

Есть несколько способов добавить фотографию:

#### Вариант 1: Прямая ссылка на изображение
1. Загрузите фото на любой хостинг изображений (Imgur, Cloudinary, или ваш сервер)
2. Скопируйте прямую ссылку на изображение
3. В Directus откройте запись мастера в коллекции **masters**
4. Вставьте ссылку в поле `photoUrl`
5. Сохраните

#### Вариант 2: Через Directus Files (Рекомендуется) ✨

1. **Загрузи фото в Directus:**
   - File Library → Upload
   - Выбери фото мастера
   - Скопируй ID файла (UUID)

2. **Укажи ID в профиле:**
   - Content → masters
   - В поле `photoUrl` вставь ID файла
   - Save

**Готово!** Приложение автоматически сформирует URL: `https://1.cycloscope.online/assets/{fileId}`

#### Вариант 3: Автоматическая загрузка из Telegram (Опционально)

Требует дополнительной настройки:
- Создать скрипт синхронизации с Telegram Bot API
- Или использовать Directus Flows для автоматизации
- См. `ПРАВИЛЬНАЯ_НАСТРОЙКА_ФОТО.md` для деталей

#### Вариант 3: Загрузка в Directus Files
1. В Directus перейдите в **File Library**
2. Загрузите фотографию
3. Скопируйте публичный URL файла
4. Вставьте его в поле `photoUrl` мастера

### Шаг 3: Проверка

После добавления `photoUrl`:
1. Откройте приложение в режиме клиента (по ссылке записи)
2. Фотография мастера должна отображаться в шапке профиля
3. Если фото не загружается, автоматически покажутся инициалы

## Технические детали

### Формат изображения
- Рекомендуемый размер: 200x200px или больше
- Формат: JPG, PNG, WebP
- Изображение автоматически обрезается в круг

### Fallback механизм
Если фото недоступно, компонент автоматически:
1. Генерирует уникальный цвет фона на основе имени мастера
2. Показывает инициалы (первые буквы имени и фамилии)
3. Применяет стильное оформление

### Обработка ошибок
- Если URL некорректный или изображение не загружается, показываются инициалы
- Нет необходимости в дополнительной обработке ошибок

## Пример URL

```
https://example.com/avatars/master-photo.jpg
https://i.imgur.com/abc123.jpg
https://your-directus.com/assets/uuid-here
```

## Обновление существующих мастеров

Для существующих мастеров без фото:
- Ничего делать не нужно
- Они продолжат видеть красивые инициалы
- Добавьте `photoUrl` когда будет удобно
