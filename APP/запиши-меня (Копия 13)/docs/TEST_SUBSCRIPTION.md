# üß™ –¢–µ—Å—Ç –∫–Ω–æ–ø–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

## –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç

### –®–∞–≥ 1: –°–æ–∑–¥–∞–π—Ç–µ –∑–∞–ø–∏—Å—å
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–∞–∫ –∫–ª–∏–µ–Ω—Ç (—á–µ—Ä–µ–∑ –ø—É–±–ª–∏—á–Ω—É—é —Å—Å—ã–ª–∫—É –º–∞—Å—Ç–µ—Ä–∞)
2. –í—ã–±–µ—Ä–∏—Ç–µ –ª—é–±—É—é —É—Å–ª—É–≥—É
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –∏ –Ω–∞–∂–º–∏—Ç–µ "–ó–ê–ü–ò–°–ê–¢–¨–°–Ø"

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–Ω–æ–ø–∫—É
–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∑–∞–ø–∏—Å–∏ –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –æ–¥–∏–Ω –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:

**–í–∞—Ä–∏–∞–Ω—Ç A (–Ω–µ –ø–æ–¥–ø–∏—Å–∞–Ω):**
```
üí¨ –ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∞—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –∑–∞–ø–∏—Å–∏
[–ö–Ω–æ–ø–∫–∞: –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è]
```

**–í–∞—Ä–∏–∞–Ω—Ç B (—É–∂–µ –ø–æ–¥–ø–∏—Å–∞–Ω):**
```
‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram –ø–æ–¥–∫–ª—é—á–µ–Ω—ã
```

### –®–∞–≥ 3: –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É (–µ—Å–ª–∏ –ø–æ–∫–∞–∑–∞–Ω–∞)
1. –ù–∞–∂–º–∏—Ç–µ "–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"
2. –û—Ç–∫—Ä–æ–µ—Ç—Å—è –±–æ—Ç @zapismenya_bot
3. –ö–Ω–æ–ø–∫–∞ –∏–∑–º–µ–Ω–∏—Ç—Å—è –Ω–∞ "–û–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è..."
4. –ü–æ—è–≤–∏—Ç—Å—è —Ç–µ–∫—Å—Ç: "–û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –∏ –Ω–∞–∂–º–∏—Ç–µ Start, –∑–∞—Ç–µ–º –≤–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"

### –®–∞–≥ 4: –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –≤ –±–æ—Ç–µ
1. –í –æ—Ç–∫—Ä—ã–≤—à–µ–º—Å—è –±–æ—Ç–µ –Ω–∞–∂–º–∏—Ç–µ Start (–∏–ª–∏ /start)
2. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. –ß–µ—Ä–µ–∑ 2-5 —Å–µ–∫—É–Ω–¥ –∫–Ω–æ–ø–∫–∞ –∑–∞–º–µ–Ω–∏—Ç—Å—è –Ω–∞ "‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram –ø–æ–¥–∫–ª—é—á–µ–Ω—ã"

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏

–û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12) ‚Üí Console

### –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:
–ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫. –ï—Å–ª–∏ –µ—Å—Ç—å:
```
–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–ø–∏—Å–∫–∏: ...
```
–ó–Ω–∞—á–∏—Ç –±—ç–∫–µ–Ω–¥ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–ª–∏ –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É.

### –ü—Ä–∏ –ø—É–ª–ª–∏–Ω–≥–µ:
–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ:
```
–û—à–∏–±–∫–∞ –æ–ø—Ä–æ—Å–∞ —Å—Ç–∞—Ç—É—Å–∞: ...
```
–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å–µ—Ç–∏. –ü—É–ª–ª–∏–Ω–≥ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—Å—è.

## –ü—Ä–æ–≤–µ—Ä–∫–∞ Network

DevTools ‚Üí Network ‚Üí –§–∏–ª—å—Ç—Ä: `subscription-status`

### –ù–∞—á–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å:
```
GET /booking/<appointmentId>/subscription-status
Status: 200 OK
Response: { "subscribed": false }
```

### –í–æ –≤—Ä–µ–º—è –ø—É–ª–ª–∏–Ω–≥–∞ (–∫–∞–∂–¥—ã–µ 2.5 —Å–µ–∫):
```
GET /booking/<appointmentId>/subscription-status
Status: 200 OK
Response: { "subscribed": false }
...
Response: { "subscribed": true, "chatId": "123456789" }
```

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ö–Ω–æ–ø–∫–∞ –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è
**–ü—Ä–∏—á–∏–Ω—ã:**
- –ó–∞–ø–∏—Å—å –Ω–µ —Å–æ–∑–¥–∞–ª–∞—Å—å (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏)
- `lastAppointmentId` –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–ª—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ React DevTools —Å–æ—Å—Ç–æ—è–Ω–∏–µ `lastAppointmentId`

### –ö–Ω–æ–ø–∫–∞ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ Start –≤ –±–æ—Ç–µ
**–ü—Ä–∏—á–∏–Ω—ã:**
- –ë–æ—Ç –Ω–µ —Å–æ—Ö—Ä–∞–Ω–∏–ª `chatId` –≤ –±–∞–∑—É
- –ü—É–ª–ª–∏–Ω–≥ –æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è –ø–æ —Ç–∞–π–º–∞—É—Ç—É (60 —Å–µ–∫)
- –ë—ç–∫–µ–Ω–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network ‚Üí –≤–∏–¥–Ω—ã –ª–∏ –∑–∞–ø—Ä–æ—Å—ã –∫–∞–∂–¥—ã–µ 2.5 —Å–µ–∫
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–≤–µ—Ç—ã - –ø—Ä–∏—Ö–æ–¥–∏—Ç –ª–∏ `subscribed: true`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞ - —Å–æ—Ö—Ä–∞–Ω–∏–ª—Å—è –ª–∏ `chatId`

### –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è "–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å..." –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ
**–ü—Ä–∏—á–∏–Ω—ã:**
- –ë—ç–∫–µ–Ω–¥ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- CORS –æ—à–∏–±–∫–∞
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞

**–†–µ—à–µ–Ω–∏–µ:**
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network ‚Üí –µ—Å—Ç—å –ª–∏ –∑–∞–ø—Ä–æ—Å –∫ `/subscription-status`

### –ë–æ—Ç –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
**–ü—Ä–∏—á–∏–Ω—ã:**
- Telegram WebApp API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- –ë–ª–æ–∫–∏—Ä–æ–≤—â–∏–∫ –ø–æ–ø–∞–ø–æ–≤ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç–æ –≤ Telegram
2. –†–∞–∑—Ä–µ—à–∏—Ç–µ –ø–æ–ø–∞–ø—ã –¥–ª—è –¥–æ–º–µ–Ω–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏

## –£—Å–ø–µ—à–Ω—ã–π —Ç–µ—Å—Ç

‚úÖ –ö–Ω–æ–ø–∫–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –¥–ª—è –Ω–µ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤  
‚úÖ –ë–µ–π–¥–∂ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –¥–ª—è –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤  
‚úÖ –î–∏–ø–ª–∏–Ω–∫ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ  
‚úÖ –ü—É–ª–ª–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç (–≤–∏–¥–Ω—ã –∑–∞–ø—Ä–æ—Å—ã –∫–∞–∂–¥—ã–µ 2.5 —Å–µ–∫)  
‚úÖ –ü–æ—Å–ª–µ Start –≤ –±–æ—Ç–µ –∫–Ω–æ–ø–∫–∞ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ –±–µ–π–¥–∂  
‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏  

## API –¥–ª—è —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∫–∏:
```bash
curl https://api.prorab360.online/booking/<appointmentId>/subscription-status
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "subscribed": false
}
```

–∏–ª–∏

```json
{
  "subscribed": true,
  "chatId": "123456789"
}
```

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏–ø–ª–∏–Ω–∫–∞:
–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Å—ã–ª–∫—É –∏–∑ –∫–Ω–æ–ø–∫–∏ –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤—Ä—É—á–Ω—É—é:
```
https://t.me/zapismenya_bot?start=notify_<appointmentId>
```

–î–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è –±–æ—Ç —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º –æ –ø–æ–¥–ø–∏—Å–∫–µ.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–π–º–∞—É—Ç–∞:
1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É
2. –ù–ï –Ω–∞–∂–∏–º–∞–π—Ç–µ Start –≤ –±–æ—Ç–µ
3. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 60 —Å–µ–∫—É–Ω–¥
4. –ü—É–ª–ª–∏–Ω–≥ –¥–æ–ª–∂–µ–Ω –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è
5. –ö–Ω–æ–ø–∫–∞ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ "–û–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è..."

–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞.
