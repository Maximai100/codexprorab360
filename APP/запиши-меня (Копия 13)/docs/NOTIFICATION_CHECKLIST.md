# ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

## –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ masterId
- [x] –í —Ä–µ–∂–∏–º–µ –º–∞—Å—Ç–µ—Ä–∞: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `masterData.telegramId` –≤–º–µ—Å—Ç–æ `masterData.id`
- [x] –í —Ä–µ–∂–∏–º–µ –∫–ª–∏–µ–Ω—Ç–∞: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `masterData.telegramId` –≤–º–µ—Å—Ç–æ `masterData.id`
- [x] –î–æ–±–∞–≤–ª–µ–Ω—ã –ª–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏: `console.log('üíæ –°–æ—Ö—Ä–∞–Ω—è–µ–º masterId (telegramId): ...')`

### 2. ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [x] `masterId` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–µ–∞–ª—å–Ω—ã–π chat_id –º–∞—Å—Ç–µ—Ä–∞ –∏–∑ Telegram
- [x] `telegramId` —Å–æ–¥–µ—Ä–∂–∏—Ç chat_id –∫–ª–∏–µ–Ω—Ç–∞ (–∏–ª–∏ 0, –µ—Å–ª–∏ –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω)
- [x] –§–æ—Ä–º–∞—Ç payload —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –±—ç–∫–µ–Ω–¥–∞
- [x] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –¥–∞–∂–µ –µ—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω

### 3. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–ü–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"
- [x] –ö–Ω–æ–ø–∫–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
- [x] –î–∏–ø–ª–∏–Ω–∫ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º appointmentId
- [x] –§–æ—Ä–º–∞—Ç: `https://t.me/zapismenya_bot?start=notify_<appointmentId>`
- [x] –ö–Ω–æ–ø–∫–∞ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∫–ª–∏–∫–∞

### 4. ‚úÖ handleBookAppointment –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–∞–ø–∏—Å—å
- [x] –ò–∑–º–µ–Ω—ë–Ω —Ç–∏–ø –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è: `Promise<Appointment>`
- [x] –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å–æ–∑–¥–∞–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å —Å ID
- [x] –û—à–∏–±–∫–∏ –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –¥–∞–ª—å—à–µ —á–µ—Ä–µ–∑ `throw err`

### 5. ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω UI ClientBookingPage
- [x] –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `lastAppointmentId`
- [x] –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `showNotificationButton`
- [x] –ë–ª–æ–∫ —Å –∫–Ω–æ–ø–∫–æ–π —Å—Ç–∏–ª–∏–∑–æ–≤–∞–Ω –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –¥–∏–∑–∞–π–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- [x] –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è CSS-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ Telegram WebApp

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
1. `handleBookAppointment` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç Promise<Appointment>
2. `handleBook` –≤ ClientBookingPage - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç ID –∑–∞–ø–∏—Å–∏
3. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –º–∞—Å—Ç–µ—Ä–∞ –≤ useEffect - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç telegramId

### –ù–æ–≤—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è:
- `lastAppointmentId: string | null` - ID –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–æ–∑–¥–∞–Ω–Ω–æ–π –∑–∞–ø–∏—Å–∏
- `showNotificationButton: boolean` - —Ñ–ª–∞–≥ –ø–æ–∫–∞–∑–∞ –∫–Ω–æ–ø–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Ç–∏–ø—ã:
- `onBookAppointment: (appointment: Omit<Appointment, 'id'>) => Promise<Appointment>`

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞

- [x] TypeScript –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [x] Vite build –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ
- [x] –ù–µ—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –≤ –∫–æ–¥–µ
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [x] –°–æ–∑–¥–∞–Ω NOTIFICATION_FIX.md - –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- [x] –°–æ–∑–¥–∞–Ω TESTING_NOTIFICATIONS.md - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
- [x] –°–æ–∑–¥–∞–Ω NOTIFICATION_CHECKLIST.md - —á–µ–∫–ª–∏—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á

## –ß—Ç–æ –¥–∞–ª—å—à–µ?

### –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ Directus –ø–æ–ª–µ `masters.telegramId` –∑–∞–ø–æ–ª–Ω–µ–Ω–æ
2. –ü–æ–ª—É—á–∏—Ç–µ —Å–≤–æ–π chat_id –≤ @userinfobot
3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –∏–∑ TESTING_NOTIFICATIONS.md

### –î–ª—è –¥–µ–ø–ª–æ—è:
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `npm run build`
2. –ó–∞–¥–µ–ø–ª–æ–π—Ç–µ –Ω–∞ Vercel/—Ö–æ—Å—Ç–∏–Ω–≥
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ production

### –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∞–ª Start –≤ –±–æ—Ç–µ
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è VITE_BACKEND_URL

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏

- Backend API: https://api.prorab360.online/notify
- Telegram Bot: @zapismenya_bot
- Directus: https://1.cycloscope.online
