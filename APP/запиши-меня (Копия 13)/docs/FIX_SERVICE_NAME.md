# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è —É—Å–ª—É–≥–∞"

## –ü—Ä–æ–±–ª–µ–º–∞

–ó–∞–ø–∏—Å—å —Å–æ–∑–¥–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ, –Ω–æ –≤–º–µ—Å—Ç–æ –Ω–∞–∑–≤–∞–Ω–∏—è —É—Å–ª—É–≥–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è —É—Å–ª—É–≥–∞".

## –ü—Ä–∏—á–∏–Ω–∞

–§—É–Ω–∫—Ü–∏—è `convertDirectusAppointmentToLocal` –Ω–µ –º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ —É—Å–ª—É–≥—É –ø–æ ID, –ø–æ—Ç–æ–º—É —á—Ç–æ:
1. ID —É—Å–ª—É–≥–∏ –≤ –∑–∞–ø–∏—Å–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å ID –≤ –º–∞—Å—Å–∏–≤–µ —É—Å–ª—É–≥
2. –£—Å–ª—É–≥–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –Ω–µ–ø–æ–ª–Ω–æ—Å—Ç—å—é
3. –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö ID –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç (—Å—Ç—Ä–æ–∫–∞ vs —á–∏—Å–ª–æ)

## –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. –£–ª—É—á—à–µ–Ω –ø–æ–∏—Å–∫ —É—Å–ª—É–≥–∏

```typescript
// –ë—ã–ª–æ:
const service = services.find(s => s.id === String(directusAppt.service));

// –°—Ç–∞–ª–æ:
const serviceId = String(directusAppt.service);
const service = services.find(s => String(s.id) === serviceId);
```

–¢–µ–ø–µ—Ä—å –æ–±–∞ ID –ø—Ä–∏–≤–æ–¥—è—Ç—Å—è –∫ —Å—Ç—Ä–æ–∫–µ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è.

### 2. –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –∑–∞–ø–∏—Å–∏:
```
‚ö†Ô∏è –£—Å–ª—É–≥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –ø—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏:
  serviceId: "abc-123"
  availableServices: [{id: "...", name: "..."}, ...]
```

–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —É—Å–ª—É–≥:
```
üîç –ó–∞–≥—Ä—É–∂–∞–µ–º —É—Å–ª—É–≥–∏ –º–∞—Å—Ç–µ—Ä–∞...
üìã –ó–∞–≥—Ä—É–∂–µ–Ω–æ —É—Å–ª—É–≥: 3
üìã –£—Å–ª—É–≥–∏: [{id: "...", name: "–°—Ç—Ä–∏–∂–∫–∞"}, ...]
```

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–ø–∏—Å–∏:
```
üîÑ –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –∑–∞–ø–∏—Å—å –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è...
üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ —É—Å–ª—É–≥–∏ –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏: [...]
‚úÖ –°–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å: {service: "–°—Ç—Ä–∏–∂–∫–∞", ...}
```

## –ö–∞–∫ –æ—Ç–ª–∞–¥–∏—Ç—å

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π –∫–æ–Ω—Å–æ–ª—å (F12)

### –®–∞–≥ 2: –°–æ–∑–¥–∞–π –∑–∞–ø–∏—Å—å

1. –û—Ç–∫—Ä–æ–π –ø—É–±–ª–∏—á–Ω—É—é —Å—Å—ã–ª–∫—É
2. –í—ã–±–µ—Ä–∏ —É—Å–ª—É–≥—É
3. –ó–∞–ø–æ–ª–Ω–∏ —Ñ–æ—Ä–º—É
4. –ù–∞–∂–º–∏ "–ó–ê–ü–ò–°–ê–¢–¨–°–Ø"

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏

–î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ª–æ–≥–∏:

```
üìù –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏: {...}
üîç –ò—â–µ–º –º–∞—Å—Ç–µ—Ä–∞ –ø–æ telegramId: 7143047665
‚úÖ ID –º–∞—Å—Ç–µ—Ä–∞ –≤ –ë–î: "abc-123-def"
üîç –ò—â–µ–º —É—Å–ª—É–≥—É: "–°—Ç—Ä–∏–∂–∫–∞"
üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ —É—Å–ª—É–≥–∏: [{id: "xyz-789", name: "–°—Ç—Ä–∏–∂–∫–∞"}, ...]
‚úÖ ID —É—Å–ª—É–≥–∏: "xyz-789"
üì§ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ –ë–î: {master: "abc-123-def", service: "xyz-789", ...}
‚úÖ –ó–∞–ø–∏—Å—å —Å–æ–∑–¥–∞–Ω–∞: {data: {...}}
üîÑ –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –∑–∞–ø–∏—Å—å –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è...
üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ —É—Å–ª—É–≥–∏ –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏: [{id: "xyz-789", name: "–°—Ç—Ä–∏–∂–∫–∞"}, ...]
‚úÖ –°–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å: {service: "–°—Ç—Ä–∏–∂–∫–∞", ...}
```

### –®–∞–≥ 4: –ï—Å–ª–∏ –≤–∏–¥–∏—à—å "‚ö†Ô∏è –£—Å–ª—É–≥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"

–ü—Ä–æ–≤–µ—Ä—å:
1. **ID —É—Å–ª—É–≥–∏ –≤ –∑–∞–ø–∏—Å–∏:** `serviceId: "xyz-789"`
2. **–î–æ—Å—Ç—É–ø–Ω—ã–µ —É—Å–ª—É–≥–∏:** `availableServices: [{id: "xyz-789", name: "..."}, ...]`
3. **–°–æ–≤–ø–∞–¥–∞—é—Ç –ª–∏ ID?**

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 1: ID –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç

**–ü—Ä–∏–º–µ—Ä:**
```
serviceId: "123"
availableServices: [{id: "abc-123-def", name: "–°—Ç—Ä–∏–∂–∫–∞"}]
```

**–ü—Ä–∏—á–∏–Ω–∞:** –í –∑–∞–ø–∏—Å–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π ID —É—Å–ª—É–≥–∏.

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–ø–∏—Å–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `service.id`
2. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏: `‚úÖ ID —É—Å–ª—É–≥–∏: "..."`
3. –£–±–µ–¥–∏—Å—å, —á—Ç–æ —ç—Ç–æ —Ç–æ—Ç –∂–µ ID, —á—Ç–æ –≤ `availableServices`

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –£—Å–ª—É–≥–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã

**–ü—Ä–∏–º–µ—Ä:**
```
üìã –ó–∞–≥—Ä—É–∂–µ–Ω–æ —É—Å–ª—É–≥: 0
üìã –£—Å–ª—É–≥–∏: []
```

**–ü—Ä–∏—á–∏–Ω–∞:** –£—Å–ª—É–≥–∏ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∏—Å—å –∏–∑ –ë–î.

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ —É—Å–ª—É–≥–∏ —Å–æ–∑–¥–∞–Ω—ã –≤ Directus
2. –ü—Ä–æ–≤–µ—Ä—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (Public role –¥–æ–ª–∂–Ω–∞ –∏–º–µ—Ç—å Read –¥–ª—è `services`)
3. –ü—Ä–æ–≤–µ—Ä—å —Ñ–∏–ª—å—Ç—Ä: `filter[master][_eq]=MASTER_ID`

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –£—Å–ª—É–≥–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –±–µ–∑ ID

**–ü—Ä–∏–º–µ—Ä:**
```
üìã –£—Å–ª—É–≥–∏: [{id: undefined, name: "–°—Ç—Ä–∏–∂–∫–∞"}, ...]
```

**–ü—Ä–∏—á–∏–Ω–∞:** –ü–æ–ª–µ `id` –Ω–µ –≤–∫–ª—é—á–µ–Ω–æ –≤ –∑–∞–ø—Ä–æ—Å.

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å –∑–∞–ø—Ä–æ—Å: –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `fields=*` –∏–ª–∏ `fields=id,name,price,duration`
2. –£–±–µ–¥–∏—Å—å, —á—Ç–æ –≤ Directus —É —É—Å–ª—É–≥ –µ—Å—Ç—å –ø–æ–ª–µ `id`

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ë–î

### –ü—Ä–æ–≤–µ—Ä—å –∑–∞–ø–∏—Å—å:

```sql
SELECT * FROM appointments WHERE id = 'APPOINTMENT_ID';
```

–ü–æ–ª–µ `service` –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å UUID —É—Å–ª—É–≥–∏.

### –ü—Ä–æ–≤–µ—Ä—å —É—Å–ª—É–≥—É:

```sql
SELECT * FROM services WHERE id = 'SERVICE_ID';
```

–î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–ø–∏—Å—å —Å —Ç–∞–∫–∏–º ID.

### –ü—Ä–æ–≤–µ—Ä—å —Å–≤—è–∑—å:

```sql
SELECT 
  a.id as appointment_id,
  a.clientName,
  s.id as service_id,
  s.name as service_name
FROM appointments a
LEFT JOIN services s ON a.service = s.id
WHERE a.id = 'APPOINTMENT_ID';
```

–ï—Å–ª–∏ `service_name` NULL - —Å–≤—è–∑—å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏

1. –û—Ç–∫—Ä–æ–π –∫–æ–Ω—Å–æ–ª—å (F12)
2. –°–æ–∑–¥–∞–π –∑–∞–ø–∏—Å—å
3. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏:
   - ‚úÖ ID —É—Å–ª—É–≥–∏ –Ω–∞–π–¥–µ–Ω
   - ‚úÖ –ó–∞–ø–∏—Å—å —Å–æ–∑–¥–∞–Ω–∞
   - ‚úÖ –°–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏

### –¢–µ—Å—Ç 2: –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–ø–∏—Å–µ–π

1. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É
2. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏:
   - üìã –£—Å–ª—É–≥–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã
   - ‚úÖ –ó–∞–ø–∏—Å–∏ —Å–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏

### –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ë–î

1. –û—Ç–∫—Ä–æ–π Directus
2. –ü–µ—Ä–µ–π–¥–∏ –≤ `appointments`
3. –ù–∞–π–¥–∏ —Å–æ–∑–¥–∞–Ω–Ω—É—é –∑–∞–ø–∏—Å—å
4. –ü—Ä–æ–≤–µ—Ä—å –ø–æ–ª–µ `service` - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å UUID
5. –ü–µ—Ä–µ–π–¥–∏ –≤ `services`
6. –ù–∞–π–¥–∏ —É—Å–ª—É–≥—É —Å —Ç–∞–∫–∏–º UUID
7. –ü—Ä–æ–≤–µ—Ä—å –Ω–∞–∑–≤–∞–Ω–∏–µ

## –ò—Ç–æ–≥

–¢–µ–ø–µ—Ä—å:
- ‚úÖ –£–ª—É—á—à–µ–Ω –ø–æ–∏—Å–∫ —É—Å–ª—É–≥–∏ (–ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –∫ —Å—Ç—Ä–æ–∫–µ)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –õ–µ–≥–∫–æ –Ω–∞–π—Ç–∏, –≥–¥–µ –∏–º–µ–Ω–Ω–æ –ø—Ä–æ–±–ª–µ–º–∞

–ï—Å–ª–∏ "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è —É—Å–ª—É–≥–∞" –≤—Å–µ –µ—â–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏
2. –ù–∞–π–¥–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å ‚ö†Ô∏è
3. –°—Ä–∞–≤–Ω–∏ ID —É—Å–ª—É–≥–∏ –≤ –∑–∞–ø–∏—Å–∏ –∏ –≤ –º–∞—Å—Å–∏–≤–µ —É—Å–ª—É–≥
4. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ —É—Å–ª—É–≥–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã —Å ID

–£–¥–∞—á–∏! üöÄ
