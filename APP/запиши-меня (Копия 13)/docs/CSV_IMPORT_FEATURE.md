# Функция импорта услуг через CSV-шаблон

## Что сделано

Модифицирован раздел "Мои услуги" для удобного массового добавления услуг через CSV-файл.

## Изменения в коде

### 1. index.tsx

#### Добавлена иконка upload
В компонент `Icon` добавлена новая иконка для загрузки файлов.

#### Обновлен компонент ServicesSheet

**Новые функции:**

1. **handleDownloadTemplate()** - Скачивание CSV-шаблона
   - Создает файл с заголовками: Название, Цена, Длительность
   - Включает примеры услуг для наглядности
   - Использует BOM (\uFEFF) для корректного отображения кириллицы в Excel

2. **handleFileImport()** - Импорт услуг из CSV
   - Автоматически пропускает строку с заголовками
   - Валидирует данные (название, цена, длительность)
   - Проверяет на дубликаты перед добавлением
   - **Сохраняет каждую услугу в базу данных Directus через API**
   - Получает ID мастера из Telegram для привязки услуг
   - Показывает количество импортированных услуг и ошибок
   - Обрабатывает ошибки с понятными сообщениями

3. **handleImportClick()** - Открывает диалог выбора файла

**Новый UI:**

Добавлена секция импорта между списком услуг и формой добавления:
- Описание процесса работы с шаблоном
- Кнопка "Скачать шаблон" (с иконкой download)
- Кнопка "Импортировать из файла" (с иконкой upload)
- Скрытый input для выбора файла

### 2. index.css

Добавлены стили для секции импорта:

```css
.import-section - контейнер секции импорта
.import-description - текст-инструкция
.import-actions - контейнер кнопок (вертикальное расположение)
```

## Как использовать

### Для пользователя:

1. Открыть раздел "Мои услуги"
2. Нажать **"Скачать шаблон"** - файл `services_template.csv` скачается
3. Открыть файл в Excel, Google Sheets или текстовом редакторе
4. Заполнить свои услуги по образцу (можно удалить примеры)
5. Сохранить файл
6. Вернуться в приложение и нажать **"Импортировать из файла"**
7. Выбрать заполненный CSV-файл
8. Услуги автоматически добавятся в список

### Формат CSV-файла:

```csv
Название,Цена,Длительность
Маникюр + гель-лак,1500,90
Стрижка мужская,1000,45
```

## Особенности реализации

✅ **Умный парсинг** - автоматически определяет и пропускает заголовки
✅ **Защита от дубликатов** - не добавляет услуги с существующими названиями
✅ **Поддержка кириллицы** - BOM для корректного отображения в Excel
✅ **Валидация данных** - проверка корректности цены и длительности
✅ **Сохранение в базу данных** - каждая услуга сохраняется через API Directus
✅ **Обработка ошибок** - понятные сообщения при проблемах, подсчет успешных и неудачных операций
✅ **Тактильная обратная связь** - вибрация при успешных действиях
✅ **Возможность повторной загрузки** - сброс значения input после импорта
✅ **Асинхронная обработка** - корректная работа с async/await для API запросов

## Преимущества

- Быстрое добавление множества услуг
- Меньше ошибок при вводе
- Удобное редактирование в Excel
- Интуитивно понятный процесс
- Примеры в шаблоне помогают понять формат

## Технические детали

- Кодировка: UTF-8 с BOM
- Разделитель: запятая (,)
- Формат файла: .csv
- Обязательные поля: название, цена, длительность
- Проверка на дубликаты: по названию (регистронезависимо)
