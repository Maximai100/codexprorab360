# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ –∏–∑ Telegram

## –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ ‚úÖ

–§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤! –§–æ—Ç–æ –ø—Ä–æ—Ñ–∏–ª—è –º–∞—Å—Ç–µ—Ä–∞ —Ç–µ–ø–µ—Ä—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ Telegram.

## –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å (3 —à–∞–≥–∞)

### –®–∞–≥ 1: Directus (5 –º–∏–Ω—É—Ç)

1. –û—Ç–∫—Ä–æ–π https://1.cycloscope.online
2. Settings ‚Üí Data Model ‚Üí masters
3. Create Field:
   - Name: `photoUrl`
   - Type: String
   - Required: No
4. Save

### –®–∞–≥ 2: –ë—ç–∫–µ–Ω–¥ (30 –º–∏–Ω—É—Ç)

–î–æ–±–∞–≤—å —ç–Ω–¥–ø–æ–∏–Ω—Ç –Ω–∞ `api.prorab360.online`:

```javascript
// routes/photo.js
const express = require('express');
const axios = require('axios');
const router = express.Router();

const BOT_TOKEN = process.env.TELEGRAM_BOT_TOKEN;

router.get('/get-photo', async (req, res) => {
  try {
    const { telegramId } = req.query;
    
    if (!telegramId) {
      return res.status(400).json({ success: false, message: 'Missing telegramId' });
    }

    // –ü–æ–ª—É—á–∞–µ–º —Ñ–æ—Ç–æ –ø—Ä–æ—Ñ–∏–ª—è
    const photosRes = await axios.get(
      `https://api.telegram.org/bot${BOT_TOKEN}/getUserProfilePhotos`,
      { params: { user_id: telegramId, limit: 1 } }
    );

    const photos = photosRes.data?.result?.photos;
    if (!photos || photos.length === 0) {
      return res.json({ success: true, photoUrl: null });
    }

    // –ü–æ–ª—É—á–∞–µ–º file_path
    const fileId = photos[0][photos[0].length - 1].file_id;
    const fileRes = await axios.get(
      `https://api.telegram.org/bot${BOT_TOKEN}/getFile`,
      { params: { file_id: fileId } }
    );

    const filePath = fileRes.data?.result?.file_path;
    const photoUrl = `https://api.telegram.org/file/bot${BOT_TOKEN}/${filePath}`;

    return res.json({ success: true, photoUrl });
  } catch (error) {
    console.error('Photo error:', error.message);
    return res.status(500).json({ success: false, message: error.message });
  }
});

module.exports = router;
```

–ü–æ–¥–∫–ª—é—á–∏ –≤ `server.js`:

```javascript
const photoRouter = require('./routes/photo');
app.use('/get-photo', photoRouter);
```

–î–æ–±–∞–≤—å –≤ `.env`:

```bash
TELEGRAM_BOT_TOKEN=—Ç–≤–æ–π_—Ç–æ–∫–µ–Ω_–æ—Ç_BotFather
```

### –®–∞–≥ 3: –¢–µ—Å—Ç (5 –º–∏–Ω—É—Ç)

```bash
# –ü—Ä–æ–≤–µ—Ä—å —ç–Ω–¥–ø–æ–∏–Ω—Ç
curl "https://api.prorab360.online/get-photo?telegramId=122991166"

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å
{
  "success": true,
  "photoUrl": "https://api.telegram.org/file/bot.../photo.jpg"
}
```

–û—Ç–∫—Ä–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ - —Ñ–æ—Ç–æ –¥–æ–ª–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏! üéâ

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –ú–∞—Å—Ç–µ—Ä –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç: –µ—Å—Ç—å –ª–∏ —Ñ–æ—Ç–æ –≤ Directus?
3. –ï—Å–ª–∏ –Ω–µ—Ç ‚Üí –∑–∞–ø—Ä–æ—Å –∫ —Ç–≤–æ–µ–º—É –±—ç–∫–µ–Ω–¥—É
4. –ë—ç–∫–µ–Ω–¥ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Ñ–æ—Ç–æ –∏–∑ Telegram
5. –§–æ—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ Directus
6. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ UI

–ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –≤—Ö–æ–¥–µ —Ñ–æ—Ç–æ –±–µ—Ä–µ—Ç—Å—è –∏–∑ Directus (–±—ã—Å—Ç—Ä–æ).

## –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –§–æ—Ç–æ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
2. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –±—ç–∫–µ–Ω–¥–∞
3. –£–±–µ–¥–∏—Å—å, —á—Ç–æ `TELEGRAM_BOT_TOKEN` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π

### –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∏–Ω–∏—Ü–∏–∞–ª—ã

–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –µ—Å–ª–∏:
- –£ –º–∞—Å—Ç–µ—Ä–∞ –Ω–µ—Ç —Ñ–æ—Ç–æ –≤ Telegram
- –ë—ç–∫–µ–Ω–¥ –µ—â–µ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏

–ò–Ω–∏—Ü–∏–∞–ª—ã - —ç—Ç–æ fallback, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å.

## –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `TELEGRAM_PHOTO_SETUP.md` - –ø–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- `BACKEND_PHOTO_API.md` - –¥–µ—Ç–∞–ª–∏ API
- `PHOTO_CHECKLIST.md` - —á–µ–∫–ª–∏—Å—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

## –í–æ–ø—Ä–æ—Å—ã?

–ü—Ä–æ–≤–µ—Ä—å `PHOTO_FEATURE_SUMMARY.md` - —Ç–∞–º –≤—Å–µ –æ—Ç–≤–µ—Ç—ã!

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –§—Ä–æ–Ω—Ç–µ–Ω–¥ –≥–æ—Ç–æ–≤ | üîß –ù–∞—Å—Ç—Ä–æ–π –±—ç–∫–µ–Ω–¥ –∑–∞ 30 –º–∏–Ω—É—Ç
