# –¢–æ—á–∫–∞ –æ—Ç–∫–∞—Ç–∞ - –†–∞–±–æ—á–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** $(date)
**–í–µ—Ä—Å–∏—è:** –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—á–∞—è –≤–µ—Ä—Å–∏—è —Å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤

## –ß—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ –≤ —ç—Ç—É —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é:

### ‚úÖ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- `src/` - –ü–æ–ª–Ω–∞—è –ø–∞–ø–∫–∞ —Å –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º
- `package.json` - –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
- `tsconfig.json` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è TypeScript
- `vite.config.ts` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Vite

### ‚úÖ SQL —Å–∫—Ä–∏–ø—Ç—ã:
- `create_finance_entries_table.sql` - –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π
- `create_inventory_tables_complete.sql` - –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
- `add_file_fields.sql` - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π –¥–ª—è —Ñ–∞–π–ª–æ–≤
- `fix_finance_entries_indexes.sql` - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤
- `create_file_tables.sql` - –¢–∞–±–ª–∏—Ü—ã –¥–ª—è —Ñ–∞–π–ª–æ–≤
- `create_tasks_table.sql` - –¢–∞–±–ª–∏—Ü–∞ –∑–∞–¥–∞—á
- `create_notes_table.sql` - –¢–∞–±–ª–∏—Ü–∞ –∑–∞–º–µ—Ç–æ–∫

### ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- `FILE_UPLOAD_SETUP.md` - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
- `TROUBLESHOOTING.md` - –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫
- `README.md` - –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `IMPROVEMENTS.md` - –°–ø–∏—Å–æ–∫ —É–ª—É—á—à–µ–Ω–∏–π

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –Ω–∞ –º–æ–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏:

### ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç:
1. **–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤:**
   - –ß–µ–∫–∏ –∫ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º
   - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º
   - –°–∂–∞—Ç–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
   - Fallback –Ω–∞ base64 –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

2. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
   - –¢–∞–±–ª–∏—Ü–∞ `finance_entries` —Å –ø–æ–ª–µ–º `receipt_url`
   - –¢–∞–±–ª–∏—Ü–∞ `tools` —Å –ø–æ–ª–µ–º `image_url`
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã (–±–µ–∑ –æ—à–∏–±–æ–∫ 54000)

3. **UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
   - `FinanceEntryModal` —Å –∑–∞–≥—Ä—É–∑–∫–æ–π —á–µ–∫–æ–≤
   - `AddToolModal` —Å –∑–∞–≥—Ä—É–∑–∫–æ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
   - `ToolDetailsScreen` —Å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

4. **–•—É–∫–∏:**
   - `useProjects` —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Supabase –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π
   - `useInventory` —Å –∑–∞–≥—Ä—É–∑–∫–æ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
   - `useFileStorage` —Å —É–ª—É—á—à–µ–Ω–Ω—ã–º —Å–∂–∞—Ç–∏–µ–º

### üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
- CORS –∏ –æ—à–∏–±–∫–∞ 413 (—Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞)
- PostgreSQL –æ—à–∏–±–∫–∞ 54000 (–∏–Ω–¥–µ–∫—Å—ã)
- –ü–µ—Ä–µ–¥–∞—á–∞ —Å–∂–∞—Ç—ã—Ö —Ñ–∞–π–ª–æ–≤ –≤–º–µ—Å—Ç–æ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö

## –ö–∞–∫ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ —ç—Ç–æ–π —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏:

1. **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** (–µ—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω–æ)

2. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ñ–∞–π–ª—ã:**
   ```bash
   cp -r backup/working_state_20250918_192658/src/* src/
   cp backup/working_state_20250918_192658/*.sql ./
   cp backup/working_state_20250918_192658/*.md ./
   cp backup/working_state_20250918_192658/package.json ./
   cp backup/working_state_20250918_192658/tsconfig.json ./
   cp backup/working_state_20250918_192658/vite.config.ts ./
   ```

3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
   ```bash
   npm install
   ```

4. **–í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç—ã –≤ Supabase:**
   - `create_finance_entries_table.sql`
   - `create_inventory_tables_complete.sql` (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
   - `add_file_fields.sql`
   - `fix_finance_entries_indexes.sql`

5. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±–∞–∫–µ—Ç—ã –≤ Supabase Storage:**
   - –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∫–µ—Ç—ã `receipts` –∏ `tools-images`
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–ª–∏—Ç–∏–∫–∏ RLS

6. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
   ```bash
   npm run dev
   ```

## –°—Ç–∞—Ç—É—Å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

### –¢–∞–±–ª–∏—Ü—ã, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å:
- ‚úÖ `projects` - –ø—Ä–æ–µ–∫—Ç—ã
- ‚úÖ `finance_entries` - —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏ (—Å –ø–æ–ª–µ–º `receipt_url`)
- ‚úÖ `tools` - –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (—Å –ø–æ–ª–µ–º `image_url`)
- ‚úÖ `consumables` - —Ä–∞—Å—Ö–æ–¥–Ω–∏–∫–∏
- ‚úÖ `documents` - –¥–æ–∫—É–º–µ–Ω—Ç—ã
- ‚úÖ `photoreports` - —Ñ–æ—Ç–æ–æ—Ç—á–µ—Ç—ã
- ‚úÖ `tasks` - –∑–∞–¥–∞—á–∏
- ‚úÖ `notes` - –∑–∞–º–µ—Ç–∫–∏

### –ë–∞–∫–µ—Ç—ã Storage:
- ‚úÖ `receipts` - –¥–ª—è —á–µ–∫–æ–≤
- ‚úÖ `tools-images` - –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ `documents` - –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ `photos` - –¥–ª—è —Ñ–æ—Ç–æ–æ—Ç—á–µ—Ç–æ–≤

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:

1. **–ü—Ä–æ—Å–º–æ—Ç—Ä —á–µ–∫–æ–≤:** –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —á–µ–∫–æ–≤ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ (—Ç–æ–ª—å–∫–æ –∑–∞–≥—Ä—É–∑–∫–∞)
2. **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤:** –ú–∞–∫—Å–∏–º—É–º 5MB –¥–ª—è —á–µ–∫–æ–≤, 10MB –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö
3. **CORS:** –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ Supabase Dashboard

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è:

1. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä —á–µ–∫–æ–≤ (–º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ)
2. –î–æ–±–∞–≤–∏—Ç—å –º–∏–Ω–∏–∞—Ç—é—Ä—ã –≤ —Å–ø–∏—Å–∫–∏
3. –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
4. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏

---
**–í–∞–∂–Ω–æ:** –≠—Ç–∞ —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è —Å–æ–∑–¥–∞–Ω–∞ –≤ —Ä–∞–±–æ—á–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏. –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.
